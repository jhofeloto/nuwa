<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸš€ Nuwa Dashboard - Authentication Integration Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .auth-status {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body class="gradient-bg min-h-screen text-white" x-data="dashboardDemo()">

    <!-- Navigation Bar with Authentication -->
    <nav class="glass p-4 mb-8">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <i class="fas fa-leaf text-green-400 text-2xl"></i>
                <h1 class="text-xl font-bold">Nuwa Carbon Platform</h1>
            </div>
            
            <!-- Authentication Status -->
            <div class="flex items-center space-x-4">
                <template x-if="!isAuthenticated">
                    <div class="flex space-x-2">
                        <button @click="showLoginModal = true" 
                                class="bg-blue-500 hover:bg-blue-600 px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-sign-in-alt mr-2"></i>Login
                        </button>
                        <button @click="showRegisterModal = true" 
                                class="bg-green-500 hover:bg-green-600 px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-user-plus mr-2"></i>Register
                        </button>
                    </div>
                </template>
                
                <template x-if="isAuthenticated">
                    <div class="flex items-center space-x-4">
                        <div class="flex items-center space-x-2">
                            <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center">
                                <i class="fas fa-user text-white text-sm"></i>
                            </div>
                            <span x-text="user.name" class="font-medium"></span>
                            <span x-text="user.role" class="text-xs bg-blue-500 px-2 py-1 rounded"></span>
                        </div>
                        <button @click="logout()" 
                                class="bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-sm transition-colors">
                            <i class="fas fa-sign-out-alt mr-1"></i>Logout
                        </button>
                    </div>
                </template>
            </div>
        </div>
    </nav>

    <!-- Main Dashboard Content -->
    <div class="container mx-auto px-4">
        
        <!-- Welcome Header (Only shown when authenticated) -->
        <template x-if="isAuthenticated">
            <div class="glass rounded-2xl p-8 mb-8">
                <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between">
                    <div class="flex items-center space-x-4 mb-4 lg:mb-0">
                        <div class="w-16 h-16 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center">
                            <i class="fas fa-user text-white text-2xl"></i>
                        </div>
                        <div>
                            <h1 class="text-3xl font-bold" x-text="`Welcome back, ${user.name}!`"></h1>
                            <p class="text-white/70" x-text="user.email"></p>
                            <div class="flex items-center space-x-2 mt-2">
                                <span class="bg-blue-500 text-white px-3 py-1 rounded-full text-sm">
                                    <i class="fas fa-shield-alt mr-1"></i>
                                    <span x-text="user.role"></span>
                                </span>
                                <span x-text="user.organization" class="bg-purple-500 text-white px-3 py-1 rounded-full text-sm"></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-center lg:text-right">
                        <p class="text-white/70 text-sm">Last Login</p>
                        <p class="text-white font-medium" x-text="user.lastLogin"></p>
                        <p class="text-green-400 text-sm mt-1">
                            <i class="fas fa-check-circle mr-1"></i>Active
                        </p>
                    </div>
                </div>
                
                <!-- Permissions Display -->
                <div class="mt-6 pt-6 border-t border-white/20">
                    <p class="text-white/70 text-sm mb-2">Your Permissions:</p>
                    <div class="flex flex-wrap gap-2">
                        <template x-for="permission in user.permissions" :key="permission">
                            <span class="bg-white/20 text-white px-3 py-1 rounded text-xs" x-text="permission"></span>
                        </template>
                    </div>
                </div>
            </div>
        </template>

        <!-- Quick Actions (Permission-based) -->
        <template x-if="isAuthenticated">
            <div class="glass rounded-2xl p-6 mb-8">
                <h2 class="text-2xl font-bold mb-6">Quick Actions</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4">
                    
                    <template x-for="action in availableActions" :key="action.name">
                        <div class="card-hover bg-white/10 p-4 rounded-xl border border-white/20 cursor-pointer">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 rounded-lg flex items-center justify-center"
                                     :class="action.color">
                                    <i :class="action.icon" class="text-white"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-sm" x-text="action.name"></h3>
                                    <p class="text-xs text-white/70" x-text="action.description"></p>
                                </div>
                            </div>
                        </div>
                    </template>
                    
                </div>
                
                <div class="mt-4 pt-4 border-t border-white/20">
                    <p class="text-xs text-white/50">
                        ðŸ’¡ Available actions are based on your role permissions
                    </p>
                </div>
            </div>
        </template>

        <!-- Dashboard Stats (Mock Data) -->
        <template x-if="isAuthenticated">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="glass rounded-xl p-6 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-white/70 text-sm">Total Projects</p>
                            <p class="text-2xl font-bold">12</p>
                        </div>
                        <i class="fas fa-project-diagram text-blue-400 text-2xl"></i>
                    </div>
                </div>
                
                <div class="glass rounded-xl p-6 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-white/70 text-sm">COâ‚‚ Captured</p>
                            <p class="text-2xl font-bold">2.4M</p>
                        </div>
                        <i class="fas fa-leaf text-green-400 text-2xl"></i>
                    </div>
                </div>
                
                <div class="glass rounded-xl p-6 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-white/70 text-sm">Active Evaluations</p>
                            <p class="text-2xl font-bold">8</p>
                        </div>
                        <i class="fas fa-chart-line text-yellow-400 text-2xl"></i>
                    </div>
                </div>
                
                <div class="glass rounded-xl p-6 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-white/70 text-sm">Team Members</p>
                            <p class="text-2xl font-bold">15</p>
                        </div>
                        <i class="fas fa-users text-purple-400 text-2xl"></i>
                    </div>
                </div>
            </div>
        </template>

        <!-- Authentication Required Message -->
        <template x-if="!isAuthenticated">
            <div class="glass rounded-2xl p-12 text-center">
                <i class="fas fa-lock text-6xl text-white/50 mb-6"></i>
                <h2 class="text-3xl font-bold mb-4">Authentication Required</h2>
                <p class="text-white/70 mb-6 text-lg">Please login to access your dashboard</p>
                <div class="flex justify-center space-x-4">
                    <button @click="showLoginModal = true" 
                            class="bg-blue-500 hover:bg-blue-600 px-6 py-3 rounded-lg transition-colors font-semibold">
                        <i class="fas fa-sign-in-alt mr-2"></i>Login to Dashboard
                    </button>
                    <button @click="showRegisterModal = true" 
                            class="bg-green-500 hover:bg-green-600 px-6 py-3 rounded-lg transition-colors font-semibold">
                        <i class="fas fa-user-plus mr-2"></i>Create Account
                    </button>
                </div>
            </div>
        </template>

    </div>

    <!-- Login Modal -->
    <div x-show="showLoginModal" 
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="transition ease-in duration-200"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0"
         class="fixed inset-0 bg-black/50 flex items-center justify-center z-50"
         @click="showLoginModal = false">
        
        <div @click.stop class="glass rounded-2xl p-8 w-full max-w-md mx-4">
            <h3 class="text-2xl font-bold mb-6">Login to Your Account</h3>
            
            <form @submit.prevent="login()">
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">Email</label>
                    <input type="email" x-model="loginForm.email" required
                           class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50"
                           placeholder="demo@nuwa.earth">
                </div>
                
                <div class="mb-6">
                    <label class="block text-sm font-medium mb-2">Password</label>
                    <input type="password" x-model="loginForm.password" required
                           class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50"
                           placeholder="Enter your password">
                </div>
                
                <div class="flex space-x-4">
                    <button type="submit" class="flex-1 bg-blue-500 hover:bg-blue-600 p-3 rounded-lg font-semibold transition-colors">
                        <i class="fas fa-sign-in-alt mr-2"></i>Login
                    </button>
                    <button type="button" @click="showLoginModal = false" 
                            class="flex-1 bg-gray-500 hover:bg-gray-600 p-3 rounded-lg font-semibold transition-colors">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Register Modal -->
    <div x-show="showRegisterModal" 
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="transition ease-in duration-200"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0"
         class="fixed inset-0 bg-black/50 flex items-center justify-center z-50"
         @click="showRegisterModal = false">
        
        <div @click.stop class="glass rounded-2xl p-8 w-full max-w-md mx-4">
            <h3 class="text-2xl font-bold mb-6">Create Your Account</h3>
            
            <form @submit.prevent="register()">
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">First Name</label>
                        <input type="text" x-model="registerForm.firstName" required
                               class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50"
                               placeholder="John">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Last Name</label>
                        <input type="text" x-model="registerForm.lastName" required
                               class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50"
                               placeholder="Doe">
                    </div>
                </div>
                
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">Email</label>
                    <input type="email" x-model="registerForm.email" required
                           class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50"
                           placeholder="john@example.com">
                </div>
                
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">Username</label>
                    <input type="text" x-model="registerForm.username" required
                           class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50"
                           placeholder="johndoe">
                </div>
                
                <div class="mb-6">
                    <label class="block text-sm font-medium mb-2">Password</label>
                    <input type="password" x-model="registerForm.password" required
                           class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50"
                           placeholder="Create a strong password">
                </div>
                
                <div class="flex space-x-4">
                    <button type="submit" class="flex-1 bg-green-500 hover:bg-green-600 p-3 rounded-lg font-semibold transition-colors">
                        <i class="fas fa-user-plus mr-2"></i>Register
                    </button>
                    <button type="button" @click="showRegisterModal = false" 
                            class="flex-1 bg-gray-500 hover:bg-gray-600 p-3 rounded-lg font-semibold transition-colors">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        function dashboardDemo() {
            return {
                isAuthenticated: false,
                showLoginModal: false,
                showRegisterModal: false,
                
                user: {
                    name: '',
                    email: '',
                    role: '',
                    organization: '',
                    lastLogin: '',
                    permissions: []
                },
                
                loginForm: {
                    email: 'demo@nuwa.earth',
                    password: 'DemoPassword123!'
                },
                
                registerForm: {
                    firstName: '',
                    lastName: '',
                    email: '',
                    username: '',
                    password: ''
                },
                
                // Mock user data for different roles
                mockUsers: {
                    'demo@nuwa.earth': {
                        name: 'Demo User',
                        email: 'demo@nuwa.earth',
                        role: 'Project Manager',
                        organization: 'Nuwa Demo Org',
                        lastLogin: '2025-09-23 15:30',
                        permissions: ['PROJECT_CREATE', 'PROJECT_READ', 'EVALUATION_READ', 'SATELLITE_READ']
                    },
                    'admin@nuwa.earth': {
                        name: 'Admin User',
                        email: 'admin@nuwa.earth',
                        role: 'Administrator',
                        organization: 'Nuwa Platform',
                        lastLogin: '2025-09-23 14:45',
                        permissions: ['PROJECT_CREATE', 'PROJECT_READ', 'USER_MANAGE', 'SYSTEM_CONFIG', 'EVALUATION_CREATE']
                    },
                    'viewer@nuwa.earth': {
                        name: 'Viewer User',
                        email: 'viewer@nuwa.earth',
                        role: 'Viewer',
                        organization: 'Partner Org',
                        lastLogin: '2025-09-23 12:15',
                        permissions: ['PROJECT_READ', 'EVALUATION_READ']
                    }
                },
                
                // Action definitions based on permissions
                allActions: [
                    { name: 'Create Project', description: 'Start new project', icon: 'fas fa-plus', color: 'bg-green-500', permissions: ['PROJECT_CREATE'] },
                    { name: 'View Analytics', description: 'Carbon analytics', icon: 'fas fa-chart-bar', color: 'bg-blue-500', permissions: ['PROJECT_READ'] },
                    { name: 'Manage Users', description: 'User management', icon: 'fas fa-users-cog', color: 'bg-purple-500', permissions: ['USER_MANAGE'] },
                    { name: 'System Config', description: 'System settings', icon: 'fas fa-cog', color: 'bg-gray-500', permissions: ['SYSTEM_CONFIG'] },
                    { name: 'Evaluations', description: 'Project evaluations', icon: 'fas fa-clipboard-check', color: 'bg-yellow-500', permissions: ['EVALUATION_READ'] },
                    { name: 'Satellite Data', description: 'Satellite monitoring', icon: 'fas fa-satellite', color: 'bg-indigo-500', permissions: ['SATELLITE_READ'] }
                ],
                
                get availableActions() {
                    if (!this.isAuthenticated) return [];
                    
                    return this.allActions.filter(action => 
                        action.permissions.some(permission => 
                            this.user.permissions.includes(permission)
                        )
                    );
                },
                
                async login() {
                    try {
                        // Mock authentication - in real app, this would call the API
                        const userData = this.mockUsers[this.loginForm.email];
                        
                        if (userData && this.loginForm.password === 'DemoPassword123!') {
                            this.user = { ...userData };
                            this.isAuthenticated = true;
                            this.showLoginModal = false;
                            
                            // Show success message
                            this.showNotification('Login successful! Welcome to your dashboard.', 'success');
                        } else {
                            this.showNotification('Invalid credentials. Try demo@nuwa.earth with DemoPassword123!', 'error');
                        }
                    } catch (error) {
                        this.showNotification('Login failed. Please try again.', 'error');
                    }
                },
                
                async register() {
                    try {
                        // Mock registration
                        const newUser = {
                            name: `${this.registerForm.firstName} ${this.registerForm.lastName}`,
                            email: this.registerForm.email,
                            role: 'Viewer',
                            organization: 'New Organization',
                            lastLogin: new Date().toISOString().slice(0, 16).replace('T', ' '),
                            permissions: ['PROJECT_READ', 'EVALUATION_READ']
                        };
                        
                        this.user = newUser;
                        this.isAuthenticated = true;
                        this.showRegisterModal = false;
                        
                        this.showNotification('Registration successful! Welcome to Nuwa Platform.', 'success');
                    } catch (error) {
                        this.showNotification('Registration failed. Please try again.', 'error');
                    }
                },
                
                logout() {
                    this.isAuthenticated = false;
                    this.user = { name: '', email: '', role: '', organization: '', lastLogin: '', permissions: [] };
                    this.showNotification('You have been logged out successfully.', 'info');
                },
                
                showNotification(message, type) {
                    // Simple notification system - in real app, use a proper notification library
                    const notification = document.createElement('div');
                    const colors = {
                        success: 'bg-green-500',
                        error: 'bg-red-500',
                        info: 'bg-blue-500'
                    };
                    
                    notification.className = `fixed top-4 right-4 ${colors[type]} text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300`;
                    notification.textContent = message;
                    
                    document.body.appendChild(notification);
                    
                    setTimeout(() => {
                        notification.remove();
                    }, 4000);
                }
            };
        }
    </script>

</body>
</html>